<!-- HTML header for doxygen 1.8.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta charset="utf-8">
<meta property="og:title" content="Creating Your First Bot - D++ - The lightweight C++ Discord API Library">
<meta property="og:description" content="A lightweight C++ Discord API library supporting the entire Discord API, including Slash Commands, Voice/Audio, Sharding, Clustering and more!">
<meta property="og:image" content="https://dpp.brainbox.cc/DPP-Logo.png">
<meta property="og:url" content="https://dpp.brainbox.cc/">
<meta property="og:type" content="website">
<meta property="twitter:title" content="Creating Your First Bot - D++ - The lightweight C++ Discord API Library">
<title>Creating Your First Bot - D++ - The lightweight C++ Discord API Library</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr>
  <td id="projectlogo"><img alt="Logo" src="DPP-Logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">D++ (DPP)
   </div>
   <div id="projectbrief">A Lightweight C++ library for Discord</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('firstbot.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Creating Your First Bot </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>In this example we will create a C++ version of the <a href="https://discord.js.org/#/">discord.js</a> example program.</p>
<p>The two programs can be seen side by side below:</p>
<table class="doxtable">
<tr>
<th>C++/DPP </th><th>JavaScript/Discord.js  </th></tr>
<tr>
<td><div class="image">
<img src="cprog.png"  align="right" style="max-width: 100% !important"/>
</div>
 </td><td><div class="image">
<img src="jsprog.png"  align="right" style="max-width: 100% !important"/>
</div>
 </td></tr>
</table>
<p>Let's break this program down step by step:</p>
<h3>1. Start with an empty C++ program</h3>
<p>Make sure to include the header file for the D++ library with the instruction #include <code>&lt;dpp/dpp.h&gt;</code>!</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;dpp/dpp.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment --><h3>2. Create an instance of <a class="el" href="classdpp_1_1cluster.html" title="The cluster class represents a group of shards and a command queue for sending and receiving commands...">dpp::cluster</a></h3>
<p>To make use of the library you must create a <a class="el" href="classdpp_1_1cluster.html" title="The cluster class represents a group of shards and a command queue for sending and receiving commands...">dpp::cluster</a> object. This object is the main object in your program like the <code>Discord.Client</code> object in Discord.js.</p>
<p>You can instantiate this class as shown below. Remember to put your bot token in the code where it says <code>"token"</code>!</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;dpp/dpp.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="classdpp_1_1cluster.html">dpp::cluster</a> bot(<span class="stringliteral">&quot;token&quot;</span>);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment --><h3>3. Attach to an event</h3>
<p>To have a bot that does something, you should attach to some events. Let's start by attaching to the <code>on_ready</code> event (<a class="el" href="classdpp_1_1cluster.html#ad8170aef3ae244df66464b192e3e30e7" title="Called when a shard is connected and ready. A set of on_guild_create events will follow this event...">dpp::cluster::on_ready</a>) which will notify your program when the bot is connected:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;dpp/dpp.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="classdpp_1_1cluster.html">dpp::cluster</a> bot(<span class="stringliteral">&quot;token&quot;</span>);</div>
<div class="line"></div>
<div class="line">    bot.on_ready([&amp;bot](<span class="keyword">const</span> <a class="code" href="structdpp_1_1ready__t.html">dpp::ready_t</a> &amp; event) {</div>
<div class="line">    });</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment --><h3>4. Attach to another event to reveice messages</h3>
<p>If you want to receive messages, you should also attach your program to the <code>on_message_create</code> event (<a class="el" href="classdpp_1_1cluster.html#a29140a7c0e1250fe2016dbe4ced56f95" title="Called when a new message arrives from discord. Note that D++ does not cache messages. If you want to cache these objects you should create something yourself within your bot. Caching of messages is not on the roadmap to be supported as it consumes excessive amounts of RAM. ">dpp::cluster::on_message_create</a>) which is the same as the Discord.js <code>message</code> event. You add this to your program after the <code>on_ready</code> event:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;dpp/dpp.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="classdpp_1_1cluster.html">dpp::cluster</a> bot(<span class="stringliteral">&quot;token&quot;</span>);</div>
<div class="line"></div>
<div class="line">    bot.on_ready([&amp;bot](<span class="keyword">const</span> <a class="code" href="structdpp_1_1ready__t.html">dpp::ready_t</a> &amp; event) {</div>
<div class="line">    });</div>
<div class="line"></div>
<div class="line">    bot.on_message_create([&amp;bot](<span class="keyword">const</span> <a class="code" href="structdpp_1_1message__create__t.html">dpp::message_create_t</a> &amp; event) {</div>
<div class="line">    });</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment --><h3>5 . Add some content to the events</h3>
<p>Attaching to an event is a good start, but to make a bot you should actually put some program code into the events. Lets add some simple things into the events. We will add some code to the <code>on_ready</code> event to output the bot's nickname (<a class="el" href="classdpp_1_1cluster.html#ad31317a40181f6864646c8758871b495" title="The details of the bot user. This is assumed to be identical across all shards in the cluster...">dpp::cluster::me</a>) and some code into the <code>on_message_create</code> to look for messages that are the text <code>!ping</code> and reply with <code>!pong</code>:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;dpp/dpp.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="classdpp_1_1cluster.html">dpp::cluster</a> bot(<span class="stringliteral">&quot;token&quot;</span>);</div>
<div class="line"></div>
<div class="line">    bot.on_ready([&amp;bot](<span class="keyword">const</span> <a class="code" href="structdpp_1_1ready__t.html">dpp::ready_t</a> &amp; event) {</div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;Logged in as &quot;</span> &lt;&lt; bot.me.username &lt;&lt; <span class="stringliteral">&quot;!\n&quot;</span>;</div>
<div class="line">    });</div>
<div class="line"></div>
<div class="line">    bot.on_message_create([&amp;bot](<span class="keyword">const</span> <a class="code" href="structdpp_1_1message__create__t.html">dpp::message_create_t</a> &amp; event) {</div>
<div class="line">        <span class="keywordflow">if</span> (event.<a class="code" href="structdpp_1_1message__create__t.html#a93c10b3fce36e161eca41edcd32857d0">msg</a>-&gt;<a class="code" href="structdpp_1_1message.html#acb17877db423d2ac4b103a67e1ae2ff6">content</a> == <span class="stringliteral">&quot;!ping&quot;</span>) {</div>
<div class="line">            bot.message_create(dpp::message(event.msg-&gt;channel_id, <span class="stringliteral">&quot;Pong!&quot;</span>));</div>
<div class="line">        }</div>
<div class="line">    });</div>
<div class="line"></div>
<div class="line">    bot.start(<span class="keyword">false</span>);</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment --><p>Let's break down the code in the <code>on_message_create</code> event so that we can discuss what it is doing:</p>
<div class="fragment"><div class="line"><span class="keywordflow">if</span> (event.<a class="code" href="structdpp_1_1message__create__t.html#a93c10b3fce36e161eca41edcd32857d0">msg</a>-&gt;<a class="code" href="structdpp_1_1message.html#acb17877db423d2ac4b103a67e1ae2ff6">content</a> == <span class="stringliteral">&quot;!ping&quot;</span>) {</div>
<div class="line">    bot.message_create(<a class="code" href="structdpp_1_1message.html">dpp::message</a>(event.<a class="code" href="structdpp_1_1message__create__t.html#a93c10b3fce36e161eca41edcd32857d0">msg</a>-&gt;<a class="code" href="structdpp_1_1message.html#adceaf61877eede79f0ebeb14efa74b5e">channel_id</a>, <span class="stringliteral">&quot;Pong!&quot;</span>));</div>
<div class="line">}</div>
</div><!-- fragment --><p>This code is simply comparing the message content <code>event.msg-&gt;content</code> (dpp::message_create_t::content) against the value in a constant string value <code>"!ping"</code>. If they match, then the <code>message_create</code> function is called.</p>
<p>The <code>message_create</code> function (<a class="el" href="classdpp_1_1cluster.html#a080a8cefc6ceb0b882fdb6fe70c078a6" title="Send a message to a channel. The callback function is called when the message has been sent...">dpp::cluster::message_create</a>) sends a message. There are many ways to call this function to send embed messages, upload files, and more, but for this simple demonstration we will just send some message text. The <code>message_create</code> function accepts a <code><a class="el" href="structdpp_1_1message.html" title="Represents messages sent and received on Discord. ">dpp::message</a></code> object, which we create using two parameters:</p>
<ul>
<li>The channel ID to send to, which we get from <code>event.msg-&gt;channel_id</code> (dpp::message_create_t::channel_id)</li>
<li>The message content, which for this demonstration we just make the static text <code>"Pong!"</code>.</li>
</ul>
<h3>6. Add code to start the bot!</h3>
<p>To make the bot start, we must call the cluster::start method, e.g. in our program by using <code>bot.start(false)</code>.</p>
<p>The parameter which we set to false indicates if the function should return once all shards are created. Passing <code>false</code> here tells the program you do not need to do anything once <code>bot.start</code> is called, so the <code>return</code> statement directly afterwards is never reached:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;dpp/dpp.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="classdpp_1_1cluster.html">dpp::cluster</a> bot(<span class="stringliteral">&quot;token&quot;</span>);</div>
<div class="line"></div>
<div class="line">    bot.on_ready([&amp;bot](<span class="keyword">const</span> <a class="code" href="structdpp_1_1ready__t.html">dpp::ready_t</a> &amp; event) {</div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;Logged in as &quot;</span> &lt;&lt; bot.me.username &lt;&lt; <span class="stringliteral">&quot;!\n&quot;</span>;</div>
<div class="line">    });</div>
<div class="line"></div>
<div class="line">    bot.on_message_create([&amp;bot](<span class="keyword">const</span> <a class="code" href="structdpp_1_1message__create__t.html">dpp::message_create_t</a> &amp; event) {</div>
<div class="line">        <span class="keywordflow">if</span> (event.<a class="code" href="structdpp_1_1message__create__t.html#a93c10b3fce36e161eca41edcd32857d0">msg</a>-&gt;<a class="code" href="structdpp_1_1message.html#acb17877db423d2ac4b103a67e1ae2ff6">content</a> == <span class="stringliteral">&quot;!ping&quot;</span>) {</div>
<div class="line">            bot.message_create(dpp::message(event.msg-&gt;channel_id, <span class="stringliteral">&quot;Pong!&quot;</span>));</div>
<div class="line">        }</div>
<div class="line">    });</div>
<div class="line"></div>
<div class="line">    bot.start(<span class="keyword">false</span>);</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment --><h3>7. Run your bot</h3>
<p>Compile your bot using <code>cmake ..</code> and <code>make</code> from the build directory, and run it with <code>./test</code> - Congratulations, you now have a working bot written using the D++ library! </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.8-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="md_docpages_03_example_programs.html">Example Programs</a></li>
  </ul>
</div>
</body>
</html>
