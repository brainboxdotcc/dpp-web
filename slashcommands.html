<!-- HTML header for doxygen 1.8.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta charset="utf-8">
<meta property="og:title" content="Using Slash Commands and Interactions - D++ - The lightweight C++ Discord API Library">
<meta property="og:description" content="A lightweight C++ Discord API library supporting the entire Discord API, including Slash Commands, Voice/Audio, Sharding, Clustering and more!">
<meta property="og:image" content="https://dpp.brainbox.cc/DPP-Logo.png">
<meta property="og:url" content="https://dpp.brainbox.cc/">
<meta property="og:type" content="website">
<meta property="twitter:title" content="Using Slash Commands and Interactions - D++ - The lightweight C++ Discord API Library">
<title>Using Slash Commands and Interactions - D++ - The lightweight C++ Discord API Library</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr>
  <td id="projectlogo"><img alt="Logo" src="DPP-Logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">D++ (DPP)
   </div>
   <div id="projectbrief">A Lightweight C++ library for Discord</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('slashcommands.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Using Slash Commands and Interactions </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Slash commands and interactions are a newer feature of Discord which allow bot's commands to be registered centrally within the system and for users to easily explore and get help with avaialble commands through the client itself.</p>
<p>To add a slash command you should use the <a class="el" href="classdpp_1_1cluster.html#a1140708ccf01ffb15f19f50ae731386d" title="Create a global slash command (a bot can have a maximum of 100 of these) ">dpp::cluster::global_command_create</a> method for global commands (available to all guilds) or <a class="el" href="classdpp_1_1cluster.html#a5bca14a420fac05fbff570edb8d36e7a" title="Create a slash command local to a guild. ">dpp::cluster::guild_command_create</a> to create a local command (available only to one guild).</p>
<p>When a user issues these commands the reply will arrive via the on_interaction_create event which you can hook, and take action when you see your commands. It is possible to reply to an interaction by using either the <a class="el" href="structdpp_1_1interaction__create__t.html#a4ed4f3ec8cb17a1bfd7f786fc4a7d285" title="Send a reply for this interaction. ">dpp::interaction_create_t::reply</a> method, or by manually instantiating an object of type <a class="el" href="structdpp_1_1interaction__response.html" title="A response to an interaction, used to reply to a command and initiate a message, which can be hidden ...">dpp::interaction_response</a> and attaching a <a class="el" href="structdpp_1_1message.html" title="Represents messages sent and received on Discord. ">dpp::message</a> object to it.</p>
<p><a class="el" href="structdpp_1_1interaction__create__t.html#a4ed4f3ec8cb17a1bfd7f786fc4a7d285" title="Send a reply for this interaction. ">dpp::interaction_create_t::reply</a> has two overloaded versions of the method, one of which accepts simple std::string replies, for basic text-only messages (if your message is 'ephemeral' you must use this) and one which accepts a <a class="el" href="structdpp_1_1message.html" title="Represents messages sent and received on Discord. ">dpp::message</a> for more advanced replies. Please note that at present, Discord only supports a small subset of message and embed features within an interaction response object.</p>
<dl class="section note"><dt>Note</dt><dd>You can also use the unified command handler, which lets you combine channel based message commands and slash commands under the same lambda with the same code like they were one and the same. Note that after April of 2022 Discord will be discouraging bots from using commands that are prefixed messages via means of a privileged message intent. It is advised that you exclusively use slash commands, or the unified handler with only a prefix of "/" going forward for any new bots you create and look to migrating existing bots to this setup.</dd></dl>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;dpp/dpp.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;dpp/fmt/format.h&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="classdpp_1_1cluster.html">dpp::cluster</a> bot(<span class="stringliteral">&quot;token&quot;</span>);</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* The interaction create event is fired when someone issues your commands */</span></div>
<div class="line">    bot.on_interaction_create([&amp;bot](<span class="keyword">const</span> <a class="code" href="structdpp_1_1interaction__create__t.html">dpp::interaction_create_t</a> &amp; event) {</div>
<div class="line">        <span class="keywordflow">if</span> (event.<a class="code" href="structdpp_1_1interaction__create__t.html#a8b0c69c156a1e532507a918c13414f14">command</a>.<a class="code" href="classdpp_1_1interaction.html#ae1df9ec5826bac923ee92e2037bf17cc">type</a> == <a class="code" href="namespacedpp.html#a53805450964cf3ad4a26f673aebebd96a5d50f8860f3910c3aa52b9ab866d11c0">dpp::it_application_command</a>) {</div>
<div class="line">            dpp::command_interaction cmd_data = std::get&lt;dpp::command_interaction&gt;(event.command.data);</div>
<div class="line">            <span class="comment">/* Check which command they ran */</span></div>
<div class="line">            if (cmd_data.name == <span class="stringliteral">&quot;blep&quot;</span>) {</div>
<div class="line">                <span class="comment">/* Fetch a parameter value from the command parameters */</span></div>
<div class="line">                std::string animal = std::get&lt;std::string&gt;(event.get_parameter(<span class="stringliteral">&quot;animal&quot;</span>));</div>
<div class="line">                <span class="comment">/* Reply to the command. There is an overloaded version of this</span></div>
<div class="line"><span class="comment">                * call that accepts a dpp::message so you can send embeds.</span></div>
<div class="line"><span class="comment">                */</span></div>
<div class="line">                event.reply(dpp::ir_channel_message_with_source, fmt::format(<span class="stringliteral">&quot;Blep! You chose {}&quot;</span>, animal));</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    });</div>
<div class="line"></div>
<div class="line">    bot.on_ready([&amp;bot](<span class="keyword">const</span> <a class="code" href="structdpp_1_1ready__t.html">dpp::ready_t</a> &amp; event) {</div>
<div class="line"></div>
<div class="line">        <a class="code" href="classdpp_1_1slashcommand.html">dpp::slashcommand</a> newcommand;</div>
<div class="line">        <span class="comment">/* Create a new global command on ready event */</span></div>
<div class="line">        newcommand.<a class="code" href="classdpp_1_1slashcommand.html#aba074557679db547ec1a7ae955cd8353">set_name</a>(<span class="stringliteral">&quot;blep&quot;</span>)</div>
<div class="line">            .<a class="code" href="classdpp_1_1slashcommand.html#a50fc02275a4dcba70a5dacb4ecbd2085">set_description</a>(<span class="stringliteral">&quot;Send a random adorable animal photo&quot;</span>)</div>
<div class="line">            .<a class="code" href="classdpp_1_1slashcommand.html#a0b5e048d0df9f02f09ab1117328e0c92">set_application_id</a>(bot.me.id)</div>
<div class="line">            .<a class="code" href="classdpp_1_1slashcommand.html#a3959f3f3b2709c56e03610e6f774e449">add_option</a>(</div>
<div class="line">                <a class="code" href="structdpp_1_1command__option.html">dpp::command_option</a>(<a class="code" href="namespacedpp.html#abc401d86119c6443bf72d736857c1a58acd751201efe224973dfe952d8658a384">dpp::co_string</a>, <span class="stringliteral">&quot;animal&quot;</span>, <span class="stringliteral">&quot;The type of animal&quot;</span>, <span class="keyword">true</span>).</div>
<div class="line">                    add_choice(<a class="code" href="structdpp_1_1command__option__choice.html">dpp::command_option_choice</a>(<span class="stringliteral">&quot;Dog&quot;</span>, std::string(<span class="stringliteral">&quot;animal_dog&quot;</span>))).</div>
<div class="line">                    add_choice(<a class="code" href="structdpp_1_1command__option__choice.html">dpp::command_option_choice</a>(<span class="stringliteral">&quot;Cat&quot;</span>, std::string(<span class="stringliteral">&quot;animal_cat&quot;</span>))).</div>
<div class="line">                    add_choice(<a class="code" href="structdpp_1_1command__option__choice.html">dpp::command_option_choice</a>(<span class="stringliteral">&quot;Penguin&quot;</span>, std::string(<span class="stringliteral">&quot;animal_penguin&quot;</span>)</div>
<div class="line">                )</div>
<div class="line">            )</div>
<div class="line">        );</div>
<div class="line"></div>
<div class="line">        <span class="comment">/* Register the command */</span></div>
<div class="line">        bot.global_command_create(newcommand);</div>
<div class="line">    });</div>
<div class="line"></div>
<div class="line">    bot.start(<span class="keyword">false</span>);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.8-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="md_docpages_03_example_programs.html">Example Programs</a></li>
  </ul>
</div>
</body>
</html>
