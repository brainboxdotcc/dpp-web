<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta charset="utf-8">
<meta property="og:title" content="Using Slash Commands and Interactions - D++ - The lightweight C++ Discord API Library">
<meta property="og:description" content="A lightweight C++ Discord API library supporting the entire Discord API, including Slash Commands, Voice/Audio, Sharding, Clustering and more!">
<meta name="description" content="Using Slash Commands and Interactions - D++ - A lightweight C++ Discord API library supporting the entire Discord API, including Slash Commands, Voice/Audio, Sharding, Clustering and more!">
<meta property="og:image" content="https://dpp.dev/DPP-Logo.png">
<meta property="og:url" content="https://dpp.dev/">
<meta property="og:type" content="website">
<meta property="twitter:title" content="Using Slash Commands and Interactions - D++ - The lightweight C++ Discord API Library">
<title>Using Slash Commands and Interactions - D++ - The lightweight C++ Discord API Library</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<script>
	setTimeout(function() {
		$("#main-menu").html($("#main-menu").html() + "<li><select name='vsv' onchange='window.location.href=this.options[this.selectedIndex].value'><option value='/'>master</option><option value='/10.0.7/'>10.0.7</option><option value='/10.0.6/'>10.0.6</option><option value='/10.0.5/'>10.0.5</option><option value='/10.0.4/'>10.0.4</option><option value='/10.0.3/'>10.0.3</option><option value='/10.0.2/'>10.0.2</option><option value='/10.0.1/'>10.0.1</option><option value='/10.0.0/'>10.0.0</option><option value='/9.0.19/'>9.0.19</option><option value='/9.0.18/'>9.0.18</option><option value='/9.0.17/'>9.0.17</option><option value='/9.0.16/'>9.0.16</option><option value='/9.0.15/'>9.0.15</option><option value='/9.0.14/'>9.0.14</option><option value='/9.0.13/'>9.0.13</option><option value='/9.0.12/'>9.0.12</option><option value='/9.0.11/'>9.0.11</option><option value='/9.0.10/'>9.0.10</option><option value='/9.0.9/'>9.0.9</option><option value='/9.0.8/'>9.0.8</option><option value='/9.0.7/'>9.0.7</option><option value='/9.0.6/'>9.0.6</option><option value='/9.0.5/'>9.0.5</option><option value='/9.0.4/'>9.0.4</option><option value='/9.0.3/'>9.0.3</option><option value='/9.0.2/'>9.0.2</option><option value='/9.0.1/'>9.0.1</option><option value='/9.0.0/'>9.0.0</option><option value='/1.0.2/'>1.0.2</option><option value='/1.0.1/'>1.0.1</option><option value='/1.0.0/'>1.0.0</option></select></li>");
	}, 500);
</script>
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr>
  <td id="projectlogo"><img alt="Logo" src="DPP-Logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">D++ (DPP)
   </div>
   <div id="projectbrief">A Lightweight C++ library for Discord</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<label for="MSearchField" style="display: none">Search</label>
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('slashcommands.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Using Slash Commands and Interactions </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >Slash commands and interactions are a newer feature of Discord which allow bot's commands to be registered centrally within the system and for users to easily explore and get help with available commands through the client itself.</p>
<p >To add a slash command you should use the <a class="el" href="classdpp_1_1cluster.html#a11bccddf1068abb215bd6e69ba30b76b" title="Create a global slash command (a bot can have a maximum of 100 of these).">dpp::cluster::global_command_create</a> method for global commands (available to all guilds) or <a class="el" href="classdpp_1_1cluster.html#a6e4a1a241299bcd1b5f6bfd69ae1ead9" title="Create a slash command local to a guild.">dpp::cluster::guild_command_create</a> to create a local command (available only to one guild).</p>
<p >When a user issues these commands the reply will arrive via the on_interaction_create event which you can hook, and take action when you see your commands. It is possible to reply to an interaction by using either the <a class="el" href="structdpp_1_1interaction__create__t.html#a34f374b358f8d2d49fa93bfe5a2c0493" title="Acknowledge interaction without displaying a message to the user, for use with button and select menu...">dpp::interaction_create_t::reply</a> method, or by manually instantiating an object of type <a class="el" href="structdpp_1_1interaction__response.html" title="A response to an interaction, used to reply to a command and initiate a message, which can be hidden ...">dpp::interaction_response</a> and attaching a <a class="el" href="structdpp_1_1message.html" title="Represents messages sent and received on Discord.">dpp::message</a> object to it.</p>
<p ><a class="el" href="structdpp_1_1interaction__create__t.html#a34f374b358f8d2d49fa93bfe5a2c0493" title="Acknowledge interaction without displaying a message to the user, for use with button and select menu...">dpp::interaction_create_t::reply</a> has two overloaded versions of the method, one of which accepts simple std::string replies, for basic text-only messages (if your message is 'ephemeral' you must use this) and one which accepts a <a class="el" href="structdpp_1_1message.html" title="Represents messages sent and received on Discord.">dpp::message</a> for more advanced replies. Please note that at present, Discord only supports a small subset of message and embed features within an interaction response object.</p>
<dl class="section note"><dt>Note</dt><dd>You can also use the unified command handler, which lets you combine channel based message commands and slash commands under the same lambda with the same code like they were one and the same. Note that after April of 2022 Discord will be discouraging bots from using commands that are prefixed messages via means of a privileged message intent. It is advised that you exclusively use slash commands, or the unified handler with only a prefix of "/" going forward for any new bots you create and look to migrating existing bots to this setup.</dd></dl>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;dpp/dpp.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;dpp/fmt/format.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_class" href="classdpp_1_1cluster.html">dpp::cluster</a> bot(<span class="stringliteral">&quot;token&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        bot.on_log(<a class="code hl_function" href="namespacedpp_1_1utility.html#a8c2cc04bb80ffd287b376d5977899277">dpp::utility::cout_logger</a>());</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* The interaction create event is fired when someone issues your commands */</span></div>
<div class="line">    bot.on_interaction_create([&amp;bot](<span class="keyword">const</span> <a class="code hl_struct" href="structdpp_1_1interaction__create__t.html">dpp::interaction_create_t</a> &amp; event) {</div>
<div class="line">        <span class="comment">/* Check which command they ran */</span></div>
<div class="line">        <span class="keywordflow">if</span> (event.<a class="code hl_variable" href="structdpp_1_1interaction__create__t.html#a8b0c69c156a1e532507a918c13414f14">command</a>.<a class="code hl_function" href="classdpp_1_1interaction.html#aabbb8d58d708128098516ed443d5c140">get_command_name</a>() == <span class="stringliteral">&quot;blep&quot;</span>) {</div>
<div class="line">            <span class="comment">/* Fetch a parameter value from the command parameters */</span></div>
<div class="line">            std::string animal = std::get&lt;std::string&gt;(event.get_parameter(<span class="stringliteral">&quot;animal&quot;</span>));</div>
<div class="line">            <span class="comment">/* Reply to the command. There is an overloaded version of this</span></div>
<div class="line"><span class="comment">            * call that accepts a dpp::message so you can send embeds.</span></div>
<div class="line"><span class="comment">            */</span></div>
<div class="line">            event.reply(fmt::format(<span class="stringliteral">&quot;Blep! You chose {}&quot;</span>, animal));</div>
<div class="line">        }</div>
<div class="line">    });</div>
<div class="line"> </div>
<div class="line">    bot.on_ready([&amp;bot](<span class="keyword">const</span> <a class="code hl_struct" href="structdpp_1_1ready__t.html">dpp::ready_t</a> &amp; event) {</div>
<div class="line">        <span class="keywordflow">if</span> (dpp::run_once&lt;struct register_bot_commands&gt;()) {</div>
<div class="line"> </div>
<div class="line">            <span class="comment">/* Create a new global command on ready event */</span></div>
<div class="line">            <a class="code hl_class" href="classdpp_1_1slashcommand.html">dpp::slashcommand</a> newcommand(<span class="stringliteral">&quot;blep&quot;</span>, <span class="stringliteral">&quot;Send a random adorable animal photo&quot;</span>, bot.me.id)</div>
<div class="line">            newcommand.add_option(</div>
<div class="line">                    <a class="code hl_namespace" href="namespacedpp.html">dpp</a>::command_option(<a class="code hl_namespace" href="namespacedpp.html">dpp</a>::co_string, &quot;animal&quot;, &quot;The type of animal&quot;, true).</div>
<div class="line">                        add_choice(<a class="code hl_namespace" href="namespacedpp.html">dpp</a>::command_option_choice(&quot;Dog&quot;, std::<span class="keywordtype">string</span>(&quot;animal_dog&quot;))).</div>
<div class="line">                        add_choice(<a class="code hl_namespace" href="namespacedpp.html">dpp</a>::command_option_choice(&quot;Cat&quot;, std::<span class="keywordtype">string</span>(&quot;animal_cat&quot;))).</div>
<div class="line">                        add_choice(<a class="code hl_namespace" href="namespacedpp.html">dpp</a>::command_option_choice(&quot;Penguin&quot;, std::<span class="keywordtype">string</span>(&quot;animal_penguin&quot;)</div>
<div class="line">                    )</div>
<div class="line">                )</div>
<div class="line">            );</div>
<div class="line"> </div>
<div class="line">            <span class="comment">/* Register the command */</span></div>
<div class="line">            bot.global_command_create(newcommand);</div>
<div class="line">        }</div>
<div class="line">    });</div>
<div class="line"> </div>
<div class="line">    bot.start(false);</div>
<div class="line"> </div>
<div class="line">    return 0;</div>
<div class="line">}</div>
<div class="ttc" id="aclassdpp_1_1cluster_html"><div class="ttname"><a href="classdpp_1_1cluster.html">dpp::cluster</a></div><div class="ttdoc">The cluster class represents a group of shards and a command queue for sending and receiving commands...</div><div class="ttdef"><b>Definition:</b> cluster.h:467</div></div>
<div class="ttc" id="aclassdpp_1_1interaction_html_aabbb8d58d708128098516ed443d5c140"><div class="ttname"><a href="classdpp_1_1interaction.html#aabbb8d58d708128098516ed443d5c140">dpp::interaction::get_command_name</a></div><div class="ttdeci">std::string get_command_name() const</div><div class="ttdoc">Get the command name for a command interaction.</div><div class="ttdef"><b>Definition:</b> slashcommand.cpp:434</div></div>
<div class="ttc" id="aclassdpp_1_1slashcommand_html"><div class="ttname"><a href="classdpp_1_1slashcommand.html">dpp::slashcommand</a></div><div class="ttdoc">Represents an application command, created by your bot either globally, or on a guild.</div><div class="ttdef"><b>Definition:</b> appcommand.h:807</div></div>
<div class="ttc" id="anamespacedpp_1_1utility_html_a8c2cc04bb80ffd287b376d5977899277"><div class="ttname"><a href="namespacedpp_1_1utility.html#a8c2cc04bb80ffd287b376d5977899277">dpp::utility::cout_logger</a></div><div class="ttdeci">std::function&lt; void(const dpp::log_t &amp;)&gt; cout_logger()</div><div class="ttdoc">Get a default logger that outputs to std::cout. e.g.</div><div class="ttdef"><b>Definition:</b> utility.cpp:370</div></div>
<div class="ttc" id="anamespacedpp_html"><div class="ttname"><a href="namespacedpp.html">dpp</a></div><div class="ttdoc">The main namespace for D++ functions. classes and types.</div><div class="ttdef"><b>Definition:</b> application.cpp:27</div></div>
<div class="ttc" id="astructdpp_1_1interaction__create__t_html"><div class="ttname"><a href="structdpp_1_1interaction__create__t.html">dpp::interaction_create_t</a></div><div class="ttdoc">Create interaction.</div><div class="ttdef"><b>Definition:</b> dispatcher.h:291</div></div>
<div class="ttc" id="astructdpp_1_1interaction__create__t_html_a8b0c69c156a1e532507a918c13414f14"><div class="ttname"><a href="structdpp_1_1interaction__create__t.html#a8b0c69c156a1e532507a918c13414f14">dpp::interaction_create_t::command</a></div><div class="ttdeci">interaction command</div><div class="ttdoc">command interaction</div><div class="ttdef"><b>Definition:</b> dispatcher.h:422</div></div>
<div class="ttc" id="astructdpp_1_1ready__t_html"><div class="ttname"><a href="structdpp_1_1ready__t.html">dpp::ready_t</a></div><div class="ttdoc">Session ready.</div><div class="ttdef"><b>Definition:</b> dispatcher.h:705</div></div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>For demonstration purposes this code is OK, but in the real world, it's not recommended to create slash commands in the <code>on_ready</code> event because it gets called often (discord forces reconnections and sometimes these do not resume). You could for example add a commandline parameter to your bot (<code>argc</code>, <code>argv</code>) so that if you want the bot to register commands it must be launched with a specific command line argument. </dd></dl>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->

<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="md_docpages_03_example_programs.html">Example Programs</a></li>
  </ul>
</div>
<!-- utteranc.es -->
<script src="https://utteranc.es/client.js"                                                           repo="brainboxdotcc/dpp-comments"                                                             issue-term="pathname"                                                                         theme="preferred-color-scheme"
        crossorigin="anonymous"                                                                       async>                                                                                </script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-QTH6YHBNG5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
        gtag('config', 'G-QTH6YHBNG5');
</script>
<div style="z-index: -9999; position: absolute; right: 0; top: 0; font-size: 0.0001rem;color:transparent;background:none">
	<!-- For crawlability of past versions -->
	<a href='/10.0.7/'>D++ Library version 10.0.7</a><a href='/10.0.6/'>D++ Library version 10.0.6</a><a href='/10.0.5/'>D++ Library version 10.0.5</a><a href='/10.0.4/'>D++ Library version 10.0.4</a><a href='/10.0.3/'>D++ Library version 10.0.3</a><a href='/10.0.2/'>D++ Library version 10.0.2</a><a href='/10.0.1/'>D++ Library version 10.0.1</a><a href='/10.0.0/'>D++ Library version 10.0.0</a><a href='/9.0.19/'>D++ Library version 9.0.19</a><a href='/9.0.18/'>D++ Library version 9.0.18</a><a href='/9.0.17/'>D++ Library version 9.0.17</a><a href='/9.0.16/'>D++ Library version 9.0.16</a><a href='/9.0.15/'>D++ Library version 9.0.15</a><a href='/9.0.14/'>D++ Library version 9.0.14</a><a href='/9.0.13/'>D++ Library version 9.0.13</a><a href='/9.0.12/'>D++ Library version 9.0.12</a><a href='/9.0.11/'>D++ Library version 9.0.11</a><a href='/9.0.10/'>D++ Library version 9.0.10</a><a href='/9.0.9/'>D++ Library version 9.0.9</a><a href='/9.0.8/'>D++ Library version 9.0.8</a><a href='/9.0.7/'>D++ Library version 9.0.7</a><a href='/9.0.6/'>D++ Library version 9.0.6</a><a href='/9.0.5/'>D++ Library version 9.0.5</a><a href='/9.0.4/'>D++ Library version 9.0.4</a><a href='/9.0.3/'>D++ Library version 9.0.3</a><a href='/9.0.2/'>D++ Library version 9.0.2</a><a href='/9.0.1/'>D++ Library version 9.0.1</a><a href='/9.0.0/'>D++ Library version 9.0.0</a><a href='/1.0.2/'>D++ Library version 1.0.2</a><a href='/1.0.1/'>D++ Library version 1.0.1</a><a href='/1.0.0/'>D++ Library version 1.0.0</a>
</div>
</body>
</html>
