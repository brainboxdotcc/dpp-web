<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta charset="utf-8">
<meta property="og:title" content="Using Slash Commands and Interactions - D++ - The lightweight C++ Discord API Library">
<meta property="og:description" content="A lightweight C++ Discord API library supporting the entire Discord API, including Slash Commands, Voice/Audio, Sharding, Clustering and more!">
<meta name="description" content="Using Slash Commands and Interactions - D++ - A lightweight C++ Discord API library supporting the entire Discord API, including Slash Commands, Voice/Audio, Sharding, Clustering and more!">
<meta property="og:image" content="https://dpp.dev/DPP-Logo.png">
<meta property="og:url" content="https://dpp.dev/">
<meta property="og:type" content="website">
<meta property="twitter:title" content="Using Slash Commands and Interactions - D++ - The lightweight C++ Discord API Library">
<title>Using Slash Commands and Interactions - D++ - The lightweight C++ Discord API Library</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<script>
	setTimeout(function() {
		$("#main-menu").html($("#main-menu").html() + "<li><select name='vsv' onchange='window.location.href=this.options[this.selectedIndex].value'><option value='/'>master</option><option value='/9.0.10/'>9.0.10</option><option value='/9.0.9/'>9.0.9</option><option value='/9.0.8/'>9.0.8</option><option value='/9.0.7/'>9.0.7</option><option value='/9.0.6/'>9.0.6</option><option value='/9.0.5/'>9.0.5</option><option value='/9.0.4/'>9.0.4</option><option value='/9.0.3/'>9.0.3</option><option value='/9.0.2/'>9.0.2</option><option value='/9.0.1/'>9.0.1</option><option value='/9.0.0/'>9.0.0</option><option value='/1.0.2/'>1.0.2</option><option selected value='/1.0.1/'>1.0.1</option><option value='/1.0.0/'>1.0.0</option></select></li>");
	}, 500);
</script>
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr>
  <td id="projectlogo"><img alt="Logo" src="DPP-Logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">D++ (DPP)
   </div>
   <div id="projectbrief">A Lightweight C++ library for Discord</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<label for="MSearchField" style="display: none">Search</label>
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('slashcommands.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Using Slash Commands and Interactions </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >Slash commands and interactions are a newer feature of Discord which allow bot's commands to be registered centrally within the system and for users to easily explore and get help with avaialble commands through the client itself.</p>
<p >To add a slash command you should use the <a class="el" href="classdpp_1_1cluster.html#a1140708ccf01ffb15f19f50ae731386d" title="Create a global slash command (a bot can have a maximum of 100 of these).">dpp::cluster::global_command_create</a> method for global commands (available to all guilds) or <a class="el" href="classdpp_1_1cluster.html#a5bca14a420fac05fbff570edb8d36e7a" title="Create a slash command local to a guild.">dpp::cluster::guild_command_create</a> to create a local command (available only to one guild).</p>
<p >When a user issues these commands the reply will arrive via the on_interaction_create event which you can hook, and take action when you see your commands. It is possible to reply to an interaction by using either the <a class="el" href="structdpp_1_1interaction__create__t.html#a897fc83f54829f32c2041b43fd2cebaa" title="Send a reply for this interaction.">dpp::interaction_create_t::reply</a> method, or by manually instantiating an object of type <a class="el" href="structdpp_1_1interaction__response.html" title="A response to an interaction, used to reply to a command and initiate a message, which can be hidden ...">dpp::interaction_response</a> and attaching a <a class="el" href="structdpp_1_1message.html" title="Represents messages sent and received on Discord.">dpp::message</a> object to it.</p>
<p ><a class="el" href="structdpp_1_1interaction__create__t.html#a897fc83f54829f32c2041b43fd2cebaa" title="Send a reply for this interaction.">dpp::interaction_create_t::reply</a> has two overloaded versions of the method, one of which accepts simple std::string replies, for basic text-only messages (if your message is 'ephemeral' you must use this) and one which accepts a <a class="el" href="structdpp_1_1message.html" title="Represents messages sent and received on Discord.">dpp::message</a> for more advanced replies. Please note that at present, Discord only supports a small subset of message and embed features within an interaction response object.</p>
<dl class="section note"><dt>Note</dt><dd>You can also use the unified command handler, which lets you combine channel based message commands and slash commands under the same lambda with the same code like they were one and the same. Note that after April of 2022 Discord will be discouraging bots from using commands that are prefixed messages via means of a privileged message intent. It is advised that you exclusively use slash commands, or the unified handler with only a prefix of "/" going forward for any new bots you create and look to migrating existing bots to this setup.</dd></dl>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;dpp/dpp.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;dpp/fmt/format.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_class" href="classdpp_1_1cluster.html">dpp::cluster</a> bot(<span class="stringliteral">&quot;token&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* The interaction create event is fired when someone issues your commands */</span></div>
<div class="line">    bot.on_interaction_create([&amp;bot](<span class="keyword">const</span> <a class="code hl_struct" href="structdpp_1_1interaction__create__t.html">dpp::interaction_create_t</a> &amp; event) {</div>
<div class="line">        <span class="keywordflow">if</span> (event.<a class="code hl_variable" href="structdpp_1_1interaction__create__t.html#a8b0c69c156a1e532507a918c13414f14">command</a>.<a class="code hl_variable" href="classdpp_1_1interaction.html#ae1df9ec5826bac923ee92e2037bf17cc">type</a> == <a class="code hl_enumvalue" href="namespacedpp.html#a53805450964cf3ad4a26f673aebebd96a5d50f8860f3910c3aa52b9ab866d11c0">dpp::it_application_command</a>) {</div>
<div class="line">            dpp::command_interaction cmd_data = std::get&lt;dpp::command_interaction&gt;(event.command.data);</div>
<div class="line">            <span class="comment">/* Check which command they ran */</span></div>
<div class="line">            if (cmd_data.name == <span class="stringliteral">&quot;blep&quot;</span>) {</div>
<div class="line">                <span class="comment">/* Fetch a parameter value from the command parameters */</span></div>
<div class="line">                std::string animal = std::get&lt;std::string&gt;(event.get_parameter(<span class="stringliteral">&quot;animal&quot;</span>));</div>
<div class="line">                <span class="comment">/* Reply to the command. There is an overloaded version of this</span></div>
<div class="line"><span class="comment">                * call that accepts a dpp::message so you can send embeds.</span></div>
<div class="line"><span class="comment">                */</span></div>
<div class="line">                event.reply(dpp::ir_channel_message_with_source, fmt::format(<span class="stringliteral">&quot;Blep! You chose {}&quot;</span>, animal));</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    });</div>
<div class="line"> </div>
<div class="line">    bot.on_ready([&amp;bot](<span class="keyword">const</span> <a class="code hl_struct" href="structdpp_1_1ready__t.html">dpp::ready_t</a> &amp; event) {</div>
<div class="line"> </div>
<div class="line">        <a class="code hl_class" href="classdpp_1_1slashcommand.html">dpp::slashcommand</a> newcommand;</div>
<div class="line">        <span class="comment">/* Create a new global command on ready event */</span></div>
<div class="line">        newcommand.<a class="code hl_function" href="classdpp_1_1slashcommand.html#aba074557679db547ec1a7ae955cd8353">set_name</a>(<span class="stringliteral">&quot;blep&quot;</span>)</div>
<div class="line">            .set_description(<span class="stringliteral">&quot;Send a random adorable animal photo&quot;</span>)</div>
<div class="line">            .set_application_id(bot.me.id)</div>
<div class="line">            .<a class="code hl_function" href="classdpp_1_1slashcommand.html#a3959f3f3b2709c56e03610e6f774e449">add_option</a>(</div>
<div class="line">                <a class="code hl_struct" href="structdpp_1_1command__option.html">dpp::command_option</a>(<a class="code hl_enumvalue" href="namespacedpp.html#abc401d86119c6443bf72d736857c1a58acd751201efe224973dfe952d8658a384">dpp::co_string</a>, <span class="stringliteral">&quot;animal&quot;</span>, <span class="stringliteral">&quot;The type of animal&quot;</span>, <span class="keyword">true</span>).</div>
<div class="line">                    add_choice(<a class="code hl_struct" href="structdpp_1_1command__option__choice.html">dpp::command_option_choice</a>(<span class="stringliteral">&quot;Dog&quot;</span>, std::string(<span class="stringliteral">&quot;animal_dog&quot;</span>))).</div>
<div class="line">                    add_choice(<a class="code hl_struct" href="structdpp_1_1command__option__choice.html">dpp::command_option_choice</a>(<span class="stringliteral">&quot;Cat&quot;</span>, std::string(<span class="stringliteral">&quot;animal_cat&quot;</span>))).</div>
<div class="line">                    add_choice(<a class="code hl_struct" href="structdpp_1_1command__option__choice.html">dpp::command_option_choice</a>(<span class="stringliteral">&quot;Penguin&quot;</span>, std::string(<span class="stringliteral">&quot;animal_penguin&quot;</span>)</div>
<div class="line">                )</div>
<div class="line">            )</div>
<div class="line">        );</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Register the command */</span></div>
<div class="line">        bot.global_command_create(newcommand);</div>
<div class="line">    });</div>
<div class="line"> </div>
<div class="line">    bot.start(<span class="keyword">false</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="aclassdpp_1_1cluster_html"><div class="ttname"><a href="classdpp_1_1cluster.html">dpp::cluster</a></div><div class="ttdoc">The cluster class represents a group of shards and a command queue for sending and receiving commands...</div><div class="ttdef"><b>Definition:</b> cluster.h:233</div></div>
<div class="ttc" id="aclassdpp_1_1interaction_html_ae1df9ec5826bac923ee92e2037bf17cc"><div class="ttname"><a href="classdpp_1_1interaction.html#ae1df9ec5826bac923ee92e2037bf17cc">dpp::interaction::type</a></div><div class="ttdeci">uint8_t type</div><div class="ttdoc">the type of interaction</div><div class="ttdef"><b>Definition:</b> slashcommand.h:426</div></div>
<div class="ttc" id="aclassdpp_1_1slashcommand_html"><div class="ttname"><a href="classdpp_1_1slashcommand.html">dpp::slashcommand</a></div><div class="ttdoc">Represents an application command, created by your bot either globally, or on a guild.</div><div class="ttdef"><b>Definition:</b> slashcommand.h:525</div></div>
<div class="ttc" id="aclassdpp_1_1slashcommand_html_a3959f3f3b2709c56e03610e6f774e449"><div class="ttname"><a href="classdpp_1_1slashcommand.html#a3959f3f3b2709c56e03610e6f774e449">dpp::slashcommand::add_option</a></div><div class="ttdeci">slashcommand &amp; add_option(const command_option &amp;o)</div><div class="ttdoc">Add an option (parameter)</div><div class="ttdef"><b>Definition:</b> slashcommand.cpp:250</div></div>
<div class="ttc" id="aclassdpp_1_1slashcommand_html_aba074557679db547ec1a7ae955cd8353"><div class="ttname"><a href="classdpp_1_1slashcommand.html#aba074557679db547ec1a7ae955cd8353">dpp::slashcommand::set_name</a></div><div class="ttdeci">slashcommand &amp; set_name(const std::string &amp;n)</div><div class="ttdoc">Set the name of the command.</div><div class="ttdef"><b>Definition:</b> slashcommand.cpp:185</div></div>
<div class="ttc" id="anamespacedpp_html_a53805450964cf3ad4a26f673aebebd96a5d50f8860f3910c3aa52b9ab866d11c0"><div class="ttname"><a href="namespacedpp.html#a53805450964cf3ad4a26f673aebebd96a5d50f8860f3910c3aa52b9ab866d11c0">dpp::it_application_command</a></div><div class="ttdeci">@ it_application_command</div><div class="ttdoc">application command (slash command)</div><div class="ttdef"><b>Definition:</b> slashcommand.h:353</div></div>
<div class="ttc" id="anamespacedpp_html_abc401d86119c6443bf72d736857c1a58acd751201efe224973dfe952d8658a384"><div class="ttname"><a href="namespacedpp.html#abc401d86119c6443bf72d736857c1a58acd751201efe224973dfe952d8658a384">dpp::co_string</a></div><div class="ttdeci">@ co_string</div><div class="ttdef"><b>Definition:</b> slashcommand.h:48</div></div>
<div class="ttc" id="astructdpp_1_1command__option__choice_html"><div class="ttname"><a href="structdpp_1_1command__option__choice.html">dpp::command_option_choice</a></div><div class="ttdoc">This struct represents choices in a multiple choice option for a command parameter....</div><div class="ttdef"><b>Definition:</b> slashcommand.h:81</div></div>
<div class="ttc" id="astructdpp_1_1command__option_html"><div class="ttname"><a href="structdpp_1_1command__option.html">dpp::command_option</a></div><div class="ttdoc">Each command option is a command line parameter. It can have a type (see dpp::command_option_type),...</div><div class="ttdef"><b>Definition:</b> slashcommand.h:122</div></div>
<div class="ttc" id="astructdpp_1_1interaction__create__t_html"><div class="ttname"><a href="structdpp_1_1interaction__create__t.html">dpp::interaction_create_t</a></div><div class="ttdoc">Create interaction.</div><div class="ttdef"><b>Definition:</b> dispatcher.h:173</div></div>
<div class="ttc" id="astructdpp_1_1interaction__create__t_html_a8b0c69c156a1e532507a918c13414f14"><div class="ttname"><a href="structdpp_1_1interaction__create__t.html#a8b0c69c156a1e532507a918c13414f14">dpp::interaction_create_t::command</a></div><div class="ttdeci">interaction command</div><div class="ttdoc">command interaction</div><div class="ttdef"><b>Definition:</b> dispatcher.h:255</div></div>
<div class="ttc" id="astructdpp_1_1ready__t_html"><div class="ttname"><a href="structdpp_1_1ready__t.html">dpp::ready_t</a></div><div class="ttdoc">Session ready.</div><div class="ttdef"><b>Definition:</b> dispatcher.h:432</div></div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.8-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="md_docpages_03_example_programs.html">Example Programs</a></li>
  </ul>
</div>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-QTH6YHBNG5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
        gtag('config', 'G-QTH6YHBNG5');
</script>
<div style="z-index: -9999; position: absolute; right: 0; top: 0; font-size: 0.0001rem;color:transparent;background:none">
	<!-- For crawlability of past versions -->
	<a href='/9.0.10/'>D++ Library version 9.0.10</a><a href='/9.0.9/'>D++ Library version 9.0.9</a><a href='/9.0.8/'>D++ Library version 9.0.8</a><a href='/9.0.7/'>D++ Library version 9.0.7</a><a href='/9.0.6/'>D++ Library version 9.0.6</a><a href='/9.0.5/'>D++ Library version 9.0.5</a><a href='/9.0.4/'>D++ Library version 9.0.4</a><a href='/9.0.3/'>D++ Library version 9.0.3</a><a href='/9.0.2/'>D++ Library version 9.0.2</a><a href='/9.0.1/'>D++ Library version 9.0.1</a><a href='/9.0.0/'>D++ Library version 9.0.0</a><a href='/1.0.2/'>D++ Library version 1.0.2</a><a href='/1.0.1/'>D++ Library version 1.0.1</a><a href='/1.0.0/'>D++ Library version 1.0.0</a>
</div>
</body>
</html>
