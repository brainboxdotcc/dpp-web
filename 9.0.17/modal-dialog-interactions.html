<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta charset="utf-8">
<meta property="og:title" content="Modal Dialog Interactions - D++ - The lightweight C++ Discord API Library">
<meta property="og:description" content="A lightweight C++ Discord API library supporting the entire Discord API, including Slash Commands, Voice/Audio, Sharding, Clustering and more!">
<meta name="description" content="Modal Dialog Interactions - D++ - A lightweight C++ Discord API library supporting the entire Discord API, including Slash Commands, Voice/Audio, Sharding, Clustering and more!">
<meta property="og:image" content="https://dpp.dev/DPP-Logo.png">
<meta property="og:url" content="https://dpp.dev/">
<meta property="og:type" content="website">
<meta property="twitter:title" content="Modal Dialog Interactions - D++ - The lightweight C++ Discord API Library">
<title>Modal Dialog Interactions - D++ - The lightweight C++ Discord API Library</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<script>
	setTimeout(function() {
		$("#main-menu").html($("#main-menu").html() + "<li><select name='vsv' onchange='window.location.href=this.options[this.selectedIndex].value'><option value='/'>master</option><option value='/9.0.18/'>9.0.18</option><option selected value='/9.0.17/'>9.0.17</option><option value='/9.0.16/'>9.0.16</option><option value='/9.0.15/'>9.0.15</option><option value='/9.0.14/'>9.0.14</option><option value='/9.0.13/'>9.0.13</option><option value='/9.0.12/'>9.0.12</option><option value='/9.0.11/'>9.0.11</option><option value='/9.0.10/'>9.0.10</option><option value='/9.0.9/'>9.0.9</option><option value='/9.0.8/'>9.0.8</option><option value='/9.0.7/'>9.0.7</option><option value='/9.0.6/'>9.0.6</option><option value='/9.0.5/'>9.0.5</option><option value='/9.0.4/'>9.0.4</option><option value='/9.0.3/'>9.0.3</option><option value='/9.0.2/'>9.0.2</option><option value='/9.0.1/'>9.0.1</option><option value='/9.0.0/'>9.0.0</option><option value='/1.0.2/'>1.0.2</option><option value='/1.0.1/'>1.0.1</option><option value='/1.0.0/'>1.0.0</option></select></li>");
	}, 500);
</script>
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr>
  <td id="projectlogo"><img alt="Logo" src="DPP-Logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">D++ (DPP)
   </div>
   <div id="projectbrief">A Lightweight C++ library for Discord</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<label for="MSearchField" style="display: none">Search</label>
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('modal-dialog-interactions.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Modal Dialog Interactions </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >Modal dialog interactions are a new Discord API feature that allow you to have pop-up windows which prompt the user to input information. Once the user has filled in this information, your program will receive an <code>on_form_submit</code> event which will contain the data which was input. You must use a slash command interaction response to submit your modal form data to Discord, via the <code>on_interaction_create</code> event. From here calling the <code>dialog</code> method of the <code>interaction_create_t</code> event object will trigger the dialog to appear.</p>
<dl class="section warning"><dt>Warning</dt><dd>This feature is currently in a closed beta, and requires whitelisting of your application by Discord. These documents and any library methods associated with this feature are subject to change until the feature is officially announced for general use!</dd></dl>
<p>Each dialog box may have up to five rows of input fields. The example below demonstrates a simple setup with just one text input:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;dpp/dpp.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> <span class="keyword">const</span> *argv[])</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_class" href="classdpp_1_1cluster.html">dpp::cluster</a> bot(<span class="stringliteral">&quot;token&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    bot.on_ready([&amp;](<span class="keyword">const</span> <a class="code hl_struct" href="structdpp_1_1ready__t.html">dpp::ready_t</a> &amp; event) {</div>
<div class="line">        <span class="comment">/* Create a slash command and register it as a global command */</span></div>
<div class="line">        <a class="code hl_class" href="classdpp_1_1slashcommand.html">dpp::slashcommand</a> newcommand;</div>
<div class="line">        newcommand.<a class="code hl_function" href="classdpp_1_1slashcommand.html#aba074557679db547ec1a7ae955cd8353">set_name</a>(<span class="stringliteral">&quot;dialog&quot;</span>).set_description(<span class="stringliteral">&quot;Make a modal dialog box&quot;</span>).set_application_id(bot.me.id);</div>
<div class="line">        bot.global_command_create(newcommand);</div>
<div class="line">    });</div>
<div class="line"> </div>
<div class="line">    bot.on_interaction_create([&amp;bot](<span class="keyword">const</span> <a class="code hl_struct" href="structdpp_1_1interaction__create__t.html">dpp::interaction_create_t</a> &amp; event) {</div>
<div class="line">        <span class="keywordflow">if</span> (event.<a class="code hl_variable" href="structdpp_1_1interaction__create__t.html#a8b0c69c156a1e532507a918c13414f14">command</a>.<a class="code hl_variable" href="classdpp_1_1interaction.html#ae1df9ec5826bac923ee92e2037bf17cc">type</a> == <a class="code hl_enumvalue" href="namespacedpp.html#a53805450964cf3ad4a26f673aebebd96a5d50f8860f3910c3aa52b9ab866d11c0">dpp::it_application_command</a>) {</div>
<div class="line">            dpp::command_interaction cmd_data = std::get&lt;dpp::command_interaction&gt;(event.command.data);</div>
<div class="line">            <span class="comment">/* Check for our /dialog command */</span></div>
<div class="line">            if (cmd_data.name == <span class="stringliteral">&quot;dialog&quot;</span>) {</div>
<div class="line">                <span class="comment">/* Instantiate an interaction_modal_response object */</span></div>
<div class="line">                dpp::interaction_modal_response modal(<span class="stringliteral">&quot;my_modal&quot;</span>, <span class="stringliteral">&quot;Please enter stuff&quot;</span>);</div>
<div class="line">                <span class="comment">/* Add a text component */</span></div>
<div class="line">                modal.add_component(</div>
<div class="line">                    dpp::component().</div>
<div class="line">                    set_label(<span class="stringliteral">&quot;Type rammel&quot;</span>).</div>
<div class="line">                    set_id(<span class="stringliteral">&quot;field_id&quot;</span>).</div>
<div class="line">                    set_type(dpp::cot_text).</div>
<div class="line">                    set_placeholder(<span class="stringliteral">&quot;gumf&quot;</span>).</div>
<div class="line">                    set_min_length(1).</div>
<div class="line">                    set_max_length(2000).</div>
<div class="line">                    set_text_style(dpp::text_paragraph)</div>
<div class="line">                );</div>
<div class="line">                <span class="comment">/* Trigger the dialog box. All dialog boxes are ephemeral */</span></div>
<div class="line">                event.dialog(modal);</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    });</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* This event handles form submission for the modal dialog we create above */</span></div>
<div class="line">    bot.on_form_submit([&amp;](<span class="keyword">const</span> <a class="code hl_struct" href="structdpp_1_1form__submit__t.html">dpp::form_submit_t</a> &amp; event) {</div>
<div class="line">        <span class="comment">/* For this simple example we know the first element of the first row ([0][0]) is value type string.</span></div>
<div class="line"><span class="comment">         * In the real world it may not be safe to make such assumptions!</span></div>
<div class="line"><span class="comment">         */</span></div>
<div class="line">        std::string v = std::get&lt;std::string&gt;(event.<a class="code hl_variable" href="structdpp_1_1form__submit__t.html#a95c70d776a5aa714d372d0fd3029dd02">components</a>[0].components[0].value);</div>
<div class="line">        <a class="code hl_struct" href="structdpp_1_1message.html">dpp::message</a> m;</div>
<div class="line">        m.<a class="code hl_function" href="structdpp_1_1message.html#a18a1ebb4b981a0ef46f78f147aa12b66">set_content</a>(<span class="stringliteral">&quot;You entered: &quot;</span> + v).<a class="code hl_function" href="structdpp_1_1message.html#a3895655222ad8f3b9d9b96c47afb2454">set_flags</a>(<a class="code hl_enumvalue" href="namespacedpp.html#a0157b2de9cc3cf2f819b8e4d969f84a8a31f151a1f4b4763df16059ff4d88aeaf">dpp::m_ephemeral</a>);</div>
<div class="line">        <span class="comment">/* Emit a reply. Form submission is still an interaction and must generate some form of reply! */</span></div>
<div class="line">        <span class="keyword">event</span>.reply(<a class="code hl_enumvalue" href="namespacedpp.html#a83479ddaa45166def7719d5511b09d02a5a9b185d739d649208ea5e903391901c">dpp::ir_channel_message_with_source</a>, m);</div>
<div class="line">    });</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Budget brand logger */</span></div>
<div class="line">    bot.on_log([&amp;](<span class="keyword">const</span> <a class="code hl_struct" href="structdpp_1_1log__t.html">dpp::log_t</a> &amp; log) {</div>
<div class="line">        std::cout &lt;&lt; log.<a class="code hl_variable" href="structdpp_1_1log__t.html#a127b3f7ba1478e9ee378248e98c3bad7">message</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">    });</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Start bot */</span></div>
<div class="line">    bot.start(<span class="keyword">false</span>);</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="aclassdpp_1_1cluster_html"><div class="ttname"><a href="classdpp_1_1cluster.html">dpp::cluster</a></div><div class="ttdoc">The cluster class represents a group of shards and a command queue for sending and receiving commands...</div><div class="ttdef"><b>Definition:</b> cluster.h:384</div></div>
<div class="ttc" id="aclassdpp_1_1interaction_html_ae1df9ec5826bac923ee92e2037bf17cc"><div class="ttname"><a href="classdpp_1_1interaction.html#ae1df9ec5826bac923ee92e2037bf17cc">dpp::interaction::type</a></div><div class="ttdeci">uint8_t type</div><div class="ttdoc">the type of interaction</div><div class="ttdef"><b>Definition:</b> appcommand.h:563</div></div>
<div class="ttc" id="aclassdpp_1_1slashcommand_html"><div class="ttname"><a href="classdpp_1_1slashcommand.html">dpp::slashcommand</a></div><div class="ttdoc">Represents an application command, created by your bot either globally, or on a guild.</div><div class="ttdef"><b>Definition:</b> appcommand.h:679</div></div>
<div class="ttc" id="aclassdpp_1_1slashcommand_html_aba074557679db547ec1a7ae955cd8353"><div class="ttname"><a href="classdpp_1_1slashcommand.html#aba074557679db547ec1a7ae955cd8353">dpp::slashcommand::set_name</a></div><div class="ttdeci">slashcommand &amp; set_name(const std::string &amp;n)</div><div class="ttdoc">Set the name of the command.</div><div class="ttdef"><b>Definition:</b> slashcommand.cpp:188</div></div>
<div class="ttc" id="anamespacedpp_html_a0157b2de9cc3cf2f819b8e4d969f84a8a31f151a1f4b4763df16059ff4d88aeaf"><div class="ttname"><a href="namespacedpp.html#a0157b2de9cc3cf2f819b8e4d969f84a8a31f151a1f4b4763df16059ff4d88aeaf">dpp::m_ephemeral</a></div><div class="ttdeci">@ m_ephemeral</div><div class="ttdoc">this message is only visible to the user who invoked the Interaction</div><div class="ttdef"><b>Definition:</b> message.h:900</div></div>
<div class="ttc" id="anamespacedpp_html_a53805450964cf3ad4a26f673aebebd96a5d50f8860f3910c3aa52b9ab866d11c0"><div class="ttname"><a href="namespacedpp.html#a53805450964cf3ad4a26f673aebebd96a5d50f8860f3910c3aa52b9ab866d11c0">dpp::it_application_command</a></div><div class="ttdeci">@ it_application_command</div><div class="ttdoc">application command (slash command)</div><div class="ttdef"><b>Definition:</b> appcommand.h:459</div></div>
<div class="ttc" id="anamespacedpp_html_a83479ddaa45166def7719d5511b09d02a5a9b185d739d649208ea5e903391901c"><div class="ttname"><a href="namespacedpp.html#a83479ddaa45166def7719d5511b09d02a5a9b185d739d649208ea5e903391901c">dpp::ir_channel_message_with_source</a></div><div class="ttdeci">@ ir_channel_message_with_source</div><div class="ttdoc">respond to an interaction with a message</div><div class="ttdef"><b>Definition:</b> appcommand.h:218</div></div>
<div class="ttc" id="astructdpp_1_1form__submit__t_html"><div class="ttname"><a href="structdpp_1_1form__submit__t.html">dpp::form_submit_t</a></div><div class="ttdef"><b>Definition:</b> dispatcher.h:382</div></div>
<div class="ttc" id="astructdpp_1_1form__submit__t_html_a95c70d776a5aa714d372d0fd3029dd02"><div class="ttname"><a href="structdpp_1_1form__submit__t.html#a95c70d776a5aa714d372d0fd3029dd02">dpp::form_submit_t::components</a></div><div class="ttdeci">std::vector&lt; component &gt; components</div><div class="ttdoc">Message components for form reply.</div><div class="ttdef"><b>Definition:</b> dispatcher.h:403</div></div>
<div class="ttc" id="astructdpp_1_1interaction__create__t_html"><div class="ttname"><a href="structdpp_1_1interaction__create__t.html">dpp::interaction_create_t</a></div><div class="ttdoc">Create interaction.</div><div class="ttdef"><b>Definition:</b> dispatcher.h:259</div></div>
<div class="ttc" id="astructdpp_1_1interaction__create__t_html_a8b0c69c156a1e532507a918c13414f14"><div class="ttname"><a href="structdpp_1_1interaction__create__t.html#a8b0c69c156a1e532507a918c13414f14">dpp::interaction_create_t::command</a></div><div class="ttdeci">interaction command</div><div class="ttdoc">command interaction</div><div class="ttdef"><b>Definition:</b> dispatcher.h:351</div></div>
<div class="ttc" id="astructdpp_1_1log__t_html"><div class="ttname"><a href="structdpp_1_1log__t.html">dpp::log_t</a></div><div class="ttdoc">Log messages.</div><div class="ttdef"><b>Definition:</b> dispatcher.h:92</div></div>
<div class="ttc" id="astructdpp_1_1log__t_html_a127b3f7ba1478e9ee378248e98c3bad7"><div class="ttname"><a href="structdpp_1_1log__t.html#a127b3f7ba1478e9ee378248e98c3bad7">dpp::log_t::message</a></div><div class="ttdeci">std::string message</div><div class="ttdef"><b>Definition:</b> dispatcher.h:102</div></div>
<div class="ttc" id="astructdpp_1_1message_html"><div class="ttname"><a href="structdpp_1_1message.html">dpp::message</a></div><div class="ttdoc">Represents messages sent and received on Discord.</div><div class="ttdef"><b>Definition:</b> message.h:1010</div></div>
<div class="ttc" id="astructdpp_1_1message_html_a18a1ebb4b981a0ef46f78f147aa12b66"><div class="ttname"><a href="structdpp_1_1message.html#a18a1ebb4b981a0ef46f78f147aa12b66">dpp::message::set_content</a></div><div class="ttdeci">message &amp; set_content(const std::string &amp;c)</div><div class="ttdoc">Set the message content.</div><div class="ttdef"><b>Definition:</b> message.cpp:397</div></div>
<div class="ttc" id="astructdpp_1_1message_html_a3895655222ad8f3b9d9b96c47afb2454"><div class="ttname"><a href="structdpp_1_1message.html#a3895655222ad8f3b9d9b96c47afb2454">dpp::message::set_flags</a></div><div class="ttdeci">message &amp; set_flags(uint8_t f)</div><div class="ttdoc">Set the flags.</div><div class="ttdef"><b>Definition:</b> message.cpp:373</div></div>
<div class="ttc" id="astructdpp_1_1ready__t_html"><div class="ttname"><a href="structdpp_1_1ready__t.html">dpp::ready_t</a></div><div class="ttdoc">Session ready.</div><div class="ttdef"><b>Definition:</b> dispatcher.h:552</div></div>
</div><!-- fragment --><p >If you compile and run this program and wait for the global command to register, typing <code>/dialog</code> will present you with a dialog box like the one below:</p>
<div class="image">
<img src="modal_dialog.png" alt=""/>
</div>
 </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.8-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="md_docpages_03_example_programs.html">Example Programs</a></li>
  </ul>
</div>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-QTH6YHBNG5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
        gtag('config', 'G-QTH6YHBNG5');
</script>
<div style="z-index: -9999; position: absolute; right: 0; top: 0; font-size: 0.0001rem;color:transparent;background:none">
	<!-- For crawlability of past versions -->
	<a href='/9.0.18/'>D++ Library version 9.0.18</a><a href='/9.0.17/'>D++ Library version 9.0.17</a><a href='/9.0.16/'>D++ Library version 9.0.16</a><a href='/9.0.15/'>D++ Library version 9.0.15</a><a href='/9.0.14/'>D++ Library version 9.0.14</a><a href='/9.0.13/'>D++ Library version 9.0.13</a><a href='/9.0.12/'>D++ Library version 9.0.12</a><a href='/9.0.11/'>D++ Library version 9.0.11</a><a href='/9.0.10/'>D++ Library version 9.0.10</a><a href='/9.0.9/'>D++ Library version 9.0.9</a><a href='/9.0.8/'>D++ Library version 9.0.8</a><a href='/9.0.7/'>D++ Library version 9.0.7</a><a href='/9.0.6/'>D++ Library version 9.0.6</a><a href='/9.0.5/'>D++ Library version 9.0.5</a><a href='/9.0.4/'>D++ Library version 9.0.4</a><a href='/9.0.3/'>D++ Library version 9.0.3</a><a href='/9.0.2/'>D++ Library version 9.0.2</a><a href='/9.0.1/'>D++ Library version 9.0.1</a><a href='/9.0.0/'>D++ Library version 9.0.0</a><a href='/1.0.2/'>D++ Library version 1.0.2</a><a href='/1.0.1/'>D++ Library version 1.0.1</a><a href='/1.0.0/'>D++ Library version 1.0.0</a>
</div>
</body>
</html>
